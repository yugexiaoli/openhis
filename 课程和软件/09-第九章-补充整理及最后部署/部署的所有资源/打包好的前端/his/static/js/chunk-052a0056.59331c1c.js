(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-052a0056"],{"1cc4":function(e,t,a){"use strict";var r=a("e770"),n=a.n(r);n.a},"62ea":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-card",{staticStyle:{"margin-bottom":"3px"}},[a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"检查项目",prop:"checkItemIds"}},[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),e._v(" "),a("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),a("el-checkbox-group",{on:{change:e.handleCheckedItemChange},model:{value:e.queryParams.checkItemIds,callback:function(t){e.$set(e.queryParams,"checkItemIds",t)},expression:"queryParams.checkItemIds"}},e._l(e.checkItemOptions,(function(t){return a("el-checkbox",{key:t.checkItemId,attrs:{label:t.checkItemId,value:t.checkItemId}},[e._v(e._s(t.checkItemName))])})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"挂号单号",prop:"regId"}},[a("el-input",{staticStyle:{width:"380px"},attrs:{placeholder:"请输入挂号单号",clearable:"",size:"small"},model:{value:e.queryParams.regId,callback:function(t){e.$set(e.queryParams,"regId",t)},expression:"queryParams.regId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"患者姓名",prop:"patientName"}},[a("el-input",{staticStyle:{width:"380px"},attrs:{placeholder:"请输入患者姓名",clearable:"",size:"small"},model:{value:e.queryParams.patientName,callback:function(t){e.$set(e.queryParams,"patientName",t)},expression:"queryParams.patientName"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-card",{staticStyle:{"margin-bottom":"3px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"refTable",attrs:{border:"",data:e.checkResultList}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"价格"}},[a("span",[e._v(e._s(t.row.price))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("span",[e._v(e._s(t.row.createTime))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"检查单位",align:"center",prop:"itemId",width:"250"}}),e._v(" "),a("el-table-column",{attrs:{label:"挂号单号",align:"center",width:"300",prop:"regId"}}),e._v(" "),a("el-table-column",{attrs:{label:"项目名称",align:"center",prop:"checkItemName"}}),e._v(" "),a("el-table-column",{attrs:{label:"患者姓名",align:"center",prop:"patientName"}}),e._v(" "),a("el-table-column",{attrs:{label:"检查状态",align:"center",prop:"resultStatus",formatter:e.resultStatusFormatter}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return e.handleImportResult(t.row)}}},[e._v("录入结果")])]}}])})],1),e._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{"current-page":e.queryParams.pageNum,"page-sizes":[5,10,20,30],"page-size":e.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"1000px",center:"","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"检查结果",prop:"resultMsg"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入检查结果"},model:{value:e.form.resultMsg,callback:function(t){e.$set(e.form,"resultMsg",t)},expression:"form.resultMsg"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结果上传"}},[a("el-upload",{attrs:{action:e.uploadPath,headers:e.headers,"on-remove":e.handleRemove,"file-list":e.fileList,accept:"image/*",name:"mf","on-success":e.handleUploadSuccess,"on-error":e.handleUploadError,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},n=[],l=a("f7cb"),c=a("77c0"),o=a("5f87"),s={data:function(){return{loading:!1,total:0,checkItemOptions:[],queryParams:{regId:void 0,patientName:void 0,checkItemIds:[],pageNum:1,pageSize:10},checkAll:!0,isIndeterminate:!1,resultStatusOptions:[],checkResultList:[],open:!1,title:"",form:{itemId:void 0,resultMsg:void 0,resultImg:void 0},uploadPath:void 0,fileList:[],headers:void 0,fileListJsonObj:[]}},created:function(){var e=this;Object(l["e"])().then((function(t){e.checkItemOptions=t.data,e.queryParams.checkItemIds=e.checkItemOptions.map((function(e){return e.checkItemId})),e.queryAllCheckingResultForPage()})),this.getDataByType("his_check_result_status").then((function(t){e.resultStatusOptions=t.data})),this.uploadPath="/prod-api/system/upload/doUploadImage",this.headers={token:Object(o["a"])()}},methods:{handleCheckAllChange:function(e){this.queryParams.checkItemIds=e?this.checkItemOptions.map((function(e){return e.checkItemId})):[],this.isIndeterminate=!1},handleCheckedItemChange:function(e){var t=e.length;this.checkAll=t===this.checkItemOptions.length,this.isIndeterminate=t>0&&t<this.checkItemOptions.length,this.queryAllCheckResultForPage()},resultStatusFormatter:function(e){return this.selectDictLabel(this.resultStatusOptions,e.resultStatus)},queryAllCheckingResultForPage:function(){var e=this;this.loading=!0,Object(c["c"])(this.queryParams).then((function(t){e.checkResultList=t.data,e.loading=!1,e.total=t.total,console.log(e.total)})).catch((function(){e.msgError("查询失败"),e.loading=!1}))},handleSizeChange:function(e){this.queryParams.pageSize=e,this.queryAllCheckingResultForPage()},handleCurrentChange:function(e){this.queryParams.pageNum=e,this.queryAllCheckingResultForPage()},handleQuery:function(){this.queryAllCheckingResultForPage()},resetQuery:function(){this.resetForm("queryForm"),this.queryParams.checkItemIds=this.checkItemOptions.map((function(e){return e.checkItemId})),this.queryAllCheckingResultForPage()},handleImportResult:function(e){this.open=!0,this.title="录入【"+e.patientName+"】的检查结果",this.form.itemId=e.itemId},handleSubmit:function(){console.log(this.fileListJsonObj);var e=this;e.$confirm("是否确定完成检查，数据提交之后不能再修改?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.form.resultImg=JSON.stringify(e.fileListJsonObj),Object(c["a"])(e.form).then((function(t){e.msgSuccess("上传结果成功"),e.queryAllCheckingResultForPage(),e.cancel()})).catch((function(){e.msgError("开始检查失败"),e.loading=!1}))})).catch((function(){e.msgError("开始已取消"),e.loading=!1}))},cancel:function(){this.open=!1,this.form={itemId:void 0,resultMsg:void 0,resultImg:void 0}},handleRemove:function(e,t){var a=this;this.fileListJsonObj.filter((function(t){e.response.data.url===t.url&&a.fileListJsonObj.splice(a.fileListJsonObj.indexOf(t),1)}))},handleUploadSuccess:function(e,t,a){console.log("success",e,t,a),this.fileListJsonObj.push(e.data),console.log(this.fileListJsonObj)},handleUploadError:function(){this.msgError("上传失败")}}},i=s,u=(a("1cc4"),a("2877")),m=Object(u["a"])(i,r,n,!1,null,"11a5fa72",null);t["default"]=m.exports},"77c0":function(e,t,a){"use strict";a.d(t,"e",(function(){return n})),a.d(t,"d",(function(){return l})),a.d(t,"f",(function(){return c})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return i}));var r=a("b775");function n(e){return Object(r["a"])({url:"/doctor/check/queryNeedCheckItem",method:"post",data:e})}function l(e){return Object(r["a"])({url:"/doctor/check/queryCheckItemByItemId/"+e,method:"get"})}function c(e){return Object(r["a"])({url:"/doctor/check/startCheck/"+e,method:"post"})}function o(e){return Object(r["a"])({url:"/doctor/check/queryAllCheckingResultForPage",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/doctor/check/completeCheckResult",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/doctor/check/queryAllCheckResultForPage",method:"post",data:e})}},e770:function(e,t,a){},f7cb:function(e,t,a){"use strict";a.d(t,"d",(function(){return n})),a.d(t,"a",(function(){return l})),a.d(t,"f",(function(){return c})),a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return s})),a.d(t,"e",(function(){return i}));var r=a("b775");function n(e){return Object(r["a"])({url:"/system/checkItem/listCheckItemForPage",method:"get",params:e})}function l(e){return Object(r["a"])({url:"/system/checkItem/addCheckItem",method:"post",params:e})}function c(e){return Object(r["a"])({url:"/system/checkItem/updateCheckItem",method:"put",params:e})}function o(e){return Object(r["a"])({url:"/system/checkItem/deleteCheckItemByIds/"+e,method:"delete"})}function s(e){return Object(r["a"])({url:"/system/checkItem/getCheckItemById/"+e,method:"get"})}function i(){return Object(r["a"])({url:"/system/checkItem/selectAllCheckItem",method:"get"})}}}]);