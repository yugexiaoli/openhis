(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b1626"],{"202d":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-form",{ref:"queryForm",attrs:{model:t.queryParams,inline:!0,"label-width":"88px"}},[i("el-form-item",{attrs:{label:"公告标题",prop:"noticeTitle"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入通知公告标题",clearable:"",size:"small"},model:{value:t.queryParams.noticeTitle,callback:function(e){t.$set(t.queryParams,"noticeTitle",e)},expression:"queryParams.noticeTitle"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"发布者",prop:"createBy"}},[i("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入发布者",clearable:"",size:"small"},model:{value:t.queryParams.createBy,callback:function(e){t.$set(t.queryParams,"createBy",e)},expression:"queryParams.createBy"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"类型",prop:"noticeType"}},[i("el-select",{staticStyle:{width:"240px"},attrs:{placeholder:"类型",clearable:"",size:"small"},model:{value:t.queryParams.noticeType,callback:function(e){t.$set(t.queryParams,"noticeType",e)},expression:"queryParams.noticeType"}},t._l(t.noticeTypeOptions,(function(t){return i("el-option",{key:t.dictValue,attrs:{label:t.dictLabel,value:t.dictValue}})})),1)],1),t._v(" "),i("el-form-item",{attrs:{label:"状态",prop:"status"}},[i("el-select",{staticStyle:{width:"240px"},attrs:{placeholder:"可用状态",clearable:"",size:"small"},model:{value:t.queryParams.status,callback:function(e){t.$set(t.queryParams,"status",e)},expression:"queryParams.status"}},t._l(t.statusOptions,(function(t){return i("el-option",{key:t.dictValue,attrs:{label:t.dictLabel,value:t.dictValue}})})),1)],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:t.handleQuery}},[t._v("搜索")]),t._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",size:"mini"},on:{click:t.resetQuery}},[t._v("重置")])],1)],1),t._v(" "),i("el-row",{staticStyle:{"margin-bottom":"8px"},attrs:{gutter:10}},[i("el-col",{attrs:{span:1.5}},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:t.handleAdd}},[t._v("新增")])],1),t._v(" "),i("el-col",{attrs:{span:1.5}},[i("el-button",{attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:t.single},on:{click:t.handleUpdate}},[t._v("修改")])],1),t._v(" "),i("el-col",{attrs:{span:1.5}},[i("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:t.multiple},on:{click:t.handleDelete}},[t._v("删除")])],1)],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{border:"",data:t.noticeTableList},on:{"selection-change":t.handleSelectionChnage}},[i("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:"科室ID",align:"center",prop:"noticeId"}}),t._v(" "),i("el-table-column",{attrs:{label:"科室名称",align:"center",prop:"noticeTitle"}}),t._v(" "),i("el-table-column",{attrs:{label:"状态",prop:"noticeType",align:"center",formatter:t.noticeTypeFormatter}}),t._v(" "),i("el-table-column",{attrs:{label:"状态",prop:"status",align:"center",formatter:t.statusFormatter}}),t._v(" "),i("el-table-column",{attrs:{label:"发布者",align:"center",prop:"createBy"}}),t._v(" "),i("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createTime"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",icon:"el-icon-edit",size:"mini"},on:{click:function(i){return t.handleUpdate(e.row)}}},[t._v("修改")]),t._v(" "),i("el-button",{attrs:{type:"text",icon:"el-icon-delete",size:"mini"},on:{click:function(i){return t.handleDelete(e.row)}}},[t._v("删除")]),t._v(" "),i("el-button",{attrs:{type:"text",icon:"el-icon-view",size:"mini"},on:{click:function(i){return t.handleView(e.row)}}},[t._v("查看")])]}}])})],1),t._v(" "),i("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{"current-page":t.queryParams.pageNum,"page-sizes":[5,10,20,30],"page-size":t.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),i("el-dialog",{attrs:{title:t.title,visible:t.open,width:"800px",center:"","append-to-body":""},on:{"update:visible":function(e){t.open=e}}},[i("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"标题",prop:"noticeTitle"}},[i("el-input",{attrs:{placeholder:"请输入通知公告标题",clearable:"",size:"small"},model:{value:t.form.noticeTitle,callback:function(e){t.$set(t.form,"noticeTitle",e)},expression:"form.noticeTitle"}})],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"状态",prop:"status"}},[i("el-radio-group",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.statusOptions,(function(e){return i("el-radio",{key:e.dictValue,attrs:{label:e.dictValue,value:e.dictValue}},[t._v(t._s(e.dictLabel))])})),1)],1)],1),t._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"类型",prop:"noticeType"}},[i("el-radio-group",{model:{value:t.form.noticeType,callback:function(e){t.$set(t.form,"noticeType",e)},expression:"form.noticeType"}},t._l(t.noticeTypeOptions,(function(e){return i("el-radio",{key:e.dictValue,attrs:{label:e.dictValue,value:e.dictValue}},[t._v(t._s(e.dictLabel))])})),1)],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"公告内容"}},[i("markdown-editor",{ref:"noticeContent",attrs:{height:"300px",options:{hideModeSwitch:!0,previewStyle:"tab"}},model:{value:t.form.noticeContent,callback:function(e){t.$set(t.form,"noticeContent",e)},expression:"form.noticeContent"}})],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"备注",prop:"remark"}},[i("el-input",{attrs:{placeholder:"请输入备注",clearable:"",size:"small"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1)],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("确 定")]),t._v(" "),i("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1),t._v(" "),i("el-dialog",{attrs:{title:t.title,visible:t.noticeContentOpen,width:"800px",center:"","append-to-body":""},on:{"update:visible":function(e){t.noticeContentOpen=e}}},[i("MarkdownEditor",{ref:"noticeContent",attrs:{"aria-disabled":!0,options:{hideModeSwitch:!0,previewStyle:"tab"}},model:{value:t.noticeContent,callback:function(e){t.noticeContent=e},expression:"noticeContent"}})],1)],1)},o=[],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:t.id}})},r=[],l=(i("8e6e"),i("ac6a"),i("456d"),i("ade3")),s=(i("a7be"),i("44f8"),i("a6e0"),i("547e")),c=i.n(s),u={minHeight:"200px",previewStyle:"vertical",useCommandShortcut:!0,useDefaultHTMLSanitizer:!0,usageStatistics:!1,hideModeSwitch:!1,toolbarItems:["heading","bold","italic","strike","divider","hr","quote","divider","ul","ol","task","indent","outdent","divider","table","image","link","divider","code","codeblock"]};function d(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function p(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?d(Object(i),!0).forEach((function(e){Object(l["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var m={name:"MarkdownEditor",props:{value:{type:String,default:""},id:{type:String,required:!1,default:function(){return"markdown-editor-"+ +new Date+(1e3*Math.random()).toFixed(0)}},options:{type:Object,default:function(){return u}},mode:{type:String,default:"markdown"},height:{type:String,required:!1,default:"300px"},language:{type:String,required:!1,default:"en_US"}},data:function(){return{editor:null}},computed:{editorOptions:function(){var t=Object.assign({},u,this.options);return t.initialEditType=this.mode,t.height=this.height,t.language=this.language,t}},watch:{value:function(t,e){t!==e&&t!==this.editor.getValue()&&this.editor.setValue(t)},language:function(t){this.destroyEditor(),this.initEditor()},height:function(t){this.editor.height(t)},mode:function(t){this.editor.changeMode(t)}},mounted:function(){this.initEditor()},destroyed:function(){this.destroyEditor()},methods:{initEditor:function(){var t=this;this.editor=new c.a(p({el:document.getElementById(this.id)},this.editorOptions)),this.value&&this.editor.setValue(this.value),this.editor.on("change",(function(){t.$emit("input",t.editor.getValue())}))},destroyEditor:function(){this.editor&&(this.editor.off("change"),this.editor.remove())},setValue:function(t){this.editor.setValue(t)},getValue:function(){return this.editor.getValue()},setHtml:function(t){this.editor.setHtml(t)},getHtml:function(){return this.editor.getHtml()}}},h=m,f=i("2877"),g=Object(f["a"])(h,a,r,!1,null,null,null),y=g.exports,b=i("b775");function v(t){return Object(b["a"])({url:"/system/notice/listNoticeForPage",method:"get",params:t})}function _(t){return Object(b["a"])({url:"/system/notice/addNotice",method:"post",params:t})}function w(t){return Object(b["a"])({url:"/system/notice/updateNotice",method:"put",params:t})}function k(t){return Object(b["a"])({url:"/system/notice/deleteNoticeByIds/"+t,method:"delete"})}function O(t){return Object(b["a"])({url:"/system/notice/getNoticeById/"+t,method:"get"})}var T={components:{MarkdownEditor:y},data:function(){return{loading:!1,ids:[],single:!0,multiple:!0,total:0,noticeTableList:[],title:"",open:!1,statusOptions:[],noticeTypeOptions:[],dateRange:[],queryParams:{pageNum:1,pageSize:10,noticeTitle:void 0,createBy:void 0,noticeType:void 0,status:void 0},form:{},rules:{noticeTitle:[{required:!0,message:"通知公告标题不能为空",trigger:"blur"}]},noticeContentOpen:!1,noticeContent:void 0}},created:function(){var t=this;this.getDataByType("sys_normal_disable").then((function(e){t.statusOptions=e.data})),this.getDataByType("sys_notice_type").then((function(e){t.noticeTypeOptions=e.data})),this.getNoticeList()},methods:{getNoticeList:function(){var t=this;this.loading=!0,v(this.addDateRange(this.queryParams,this.dateRange)).then((function(e){t.noticeTableList=e.data,t.total=e.total,t.loading=!1}))},handleQuery:function(){this.getNoticeList()},resetQuery:function(){this.resetForm("queryForm"),this.dateRange=[],this.getNoticeList()},handleSelectionChnage:function(t){this.ids=t.map((function(t){return t.noticeId})),this.single=1!==t.length,this.multiple=!t.length},handleSizeChange:function(t){this.queryParams.pageSize=t,this.getNoticeList()},handleCurrentChange:function(t){this.queryParams.pageNum=t,this.getNoticeList()},statusFormatter:function(t){return this.selectDictLabel(this.statusOptions,t.status)},noticeTypeFormatter:function(t){return this.selectDictLabel(this.noticeTypeOptions,t.noticeType)},handleAdd:function(){this.open=!0,this.reset(),this.title="添加通知公告信息"},handleUpdate:function(t){var e=this;this.title="修改通知公告信息";var i=t.noticeId||this.ids;this.open=!0,this.reset(),this.loading=!0,O(i).then((function(t){e.form=t.data,e.loading=!1}))},handleDelete:function(t){var e=this,i=t.noticeId||this.ids;this.$confirm("此操作将永久删除该通知公告数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.loading=!0,k(i).then((function(t){e.loading=!1,e.msgSuccess("删除成功"),e.getNoticeList()})).catch((function(){e.msgError("删除失败"),e.loading=!1}))})).catch((function(){e.msgError("删除已取消"),e.loading=!1}))},handleSubmit:function(){var t=this;this.$refs["form"].validate((function(e){e&&(t.loading=!0,void 0===t.form.noticeId?_(t.form).then((function(e){t.msgSuccess("保存成功"),t.loading=!1,t.getNoticeList(),t.open=!1})).catch((function(){t.loading=!1})):w(t.form).then((function(e){t.msgSuccess("修改成功"),t.loading=!1,t.getNoticeList(),t.open=!1})).catch((function(){t.loading=!1})))}))},cancel:function(){this.open=!1,this.title=""},reset:function(){this.resetForm("form"),this.form={noticeId:void 0,noticeTitle:void 0,noticeContent:void 0,noticeType:"0",status:"0",remark:void 0}},handleView:function(t){this.title=t.noticeTitle,this.noticeContentOpen=!0,this.noticeContent=t.noticeContent}}},S=T,x=Object(f["a"])(S,n,o,!1,null,null,null);e["default"]=x.exports}}]);