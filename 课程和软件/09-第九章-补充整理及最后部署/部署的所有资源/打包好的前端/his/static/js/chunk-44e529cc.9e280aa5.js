(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44e529cc"],{"78d0":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"app-container"},[a("div",{staticStyle:{color:"red","text-align":"center"}},[e._v("*注意默认只查询当天的统计数据，如果要查询其它的，请选择范围查询")]),e._v(" "),a("br"),e._v(" "),a("el-card",{staticClass:"cardmargin"},[a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"选择日期"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{size:"small","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholde":"开始日期","end-placeholde":"结束日期"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-card",{staticClass:"cardmargin"},[e._v("\n    合计收入:￥"),a("span",[e._v(e._s(e.revenueObj.totalRevenue))])]),e._v(" "),a("el-card",{staticClass:"cardmargin"},[e._v("\n    收支概况:\n    "),a("span",{staticClass:"spancls"},[e._v("总收入￥"+e._s(e.revenueObj.overview.toll))]),e._v(" "),a("span",{staticClass:"spancls spanred"},[e._v("总退费￥"+e._s(e.revenueObj.overview.refund))])]),e._v(" "),a("el-card",{staticClass:"cardmargin"},[e._v("\n    收入渠道:\n    "),a("span",{staticClass:"spancls"},[e._v("现金支付￥"+e._s(e.revenueObj.channel.cashIncome))]),e._v(" "),a("span",{staticClass:"spancls"},[e._v("支付宝支付￥"+e._s(e.revenueObj.channel.alipayIncome))]),e._v(" "),a("span",{staticClass:"spancls spanred"},[e._v("现金退费￥"+e._s(e.revenueObj.channel.cashRefund))]),e._v(" "),a("span",{staticClass:"spancls spanred"},[e._v("支付宝退费￥"+e._s(e.revenueObj.channel.alipayRefund))])]),e._v(" "),a("el-card",[a("el-row",{attrs:{gutter:32}},[a("el-col",{attrs:{xs:24,sm:24,lg:8}},[a("div",[a("pie-chart",{ref:"p1",attrs:{"prop-pie-data":e.revenueOverview}})],1)]),e._v(" "),a("el-col",{attrs:{xs:24,sm:24,lg:8}},[a("div",[a("pie-chart",{ref:"p2",attrs:{"prop-pie-data":e.incomeChanel}})],1)]),e._v(" "),a("el-col",{attrs:{xs:24,sm:24,lg:8}},[a("div",[a("pie-chart",{ref:"p3",attrs:{"prop-pie-data":e.refund}})],1)])],1)],1)],1)},n=[],s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.className,style:{height:e.height,width:e.width}})},r=[],l=a("313e"),c=a.n(l),d=a("ed08"),o={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){var e=this;this.$_resizeHandler=Object(d["b"])((function(){e.chart&&e.chart.resize()}),100),this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},beforeDestroy:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},activated:function(){this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},deactivated:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},methods:{$_initResizeEvent:function(){window.addEventListener("resize",this.$_resizeHandler)},$_destroyResizeEvent:function(){window.removeEventListener("resize",this.$_resizeHandler)},$_sidebarResizeHandler:function(e){"width"===e.propertyName&&this.$_resizeHandler()},$_initSidebarResizeEvent:function(){this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},$_destroySidebarResizeEvent:function(){this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)}}};a("817d");var u={mixins:[o],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"},propPieData:{type:Object,default:function(){return{title:"收支概况",data:[{value:320,name:"收费金额"},{value:240,name:"退费金额"}]}}}},data:function(){return{chart:null,pieData:this.propPieData}},watch:{propPieData:{immediate:!0,handler:function(e){var t=this;this.pieData=e,this.$nextTick((function(){t.initChart()}))}}},mounted:function(){var e=this;console.log(this.propPieData),this.pieData=this.propPieData,this.$nextTick((function(){e.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=c.a.init(this.$el,"macarons"),this.chart.setOption({title:{text:this.pieData.title,left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{left:"center",bottom:"10",data:this.pieData.data},series:[{name:this.pieData.title,type:"pie",radius:[15,95],center:["50%","50%"],data:this.pieData.data,animationDuration:2600}]})}}},v=u,h=a("2877"),p=Object(h["a"])(v,s,r,!1,null,null,null),m=p.exports,f=a("b775");function _(e){return Object(f["a"])({url:"/statistics/revenue/queryAllRevenueData",method:"get",params:e})}var b={components:{PieChart:m},data:function(){return{loading:!1,queryParams:{},dateRange:void 0,revenueObj:{totalRevenue:0,overview:{toll:0,refund:0},channel:{cashIncome:0,alipayIncome:0,cashRefund:0,alipayRefund:0}},revenueOverview:{title:"收支概况",data:[{value:320,name:"收费金额"},{value:240,name:"退费金额"}]},incomeChanel:{title:"收入渠道",data:[{value:4,name:"现金收入"},{value:1,name:"支付宝收入"}]},refund:{title:"退款",data:[{value:200,name:"现金退费"},{value:100,name:"支付宝退费"}]}}},created:function(){this.loadData()},methods:{loadData:function(){var e=this;this.loading=!0,_(this.addDateRange(this.queryParams,this.dateRange)).then((function(t){e.revenueObj=t.data.revenueObj,e.revenueOverview=t.data.revenueOverview,e.incomeChanel=t.data.incomeChanel,e.refund=t.data.refund,e.loading=!1})).catch((function(){e.msgError("查询失败"),e.loading=!1}))},handleQuery:function(){this.loadData()},resetQuery:function(){this.resetForm("queryForm"),this.dateRange=[],this.loadData()}}},y=b,g=(a("ecc5"),Object(h["a"])(y,i,n,!1,null,"cecb7ece",null));t["default"]=g.exports},ecc5:function(e,t,a){"use strict";var i=a("f455"),n=a.n(i);n.a},f455:function(e,t,a){}}]);