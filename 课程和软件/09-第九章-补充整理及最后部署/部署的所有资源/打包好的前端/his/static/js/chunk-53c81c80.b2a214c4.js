(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53c81c80"],{"580c":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-tabs",{attrs:{stretch:!0},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"药品总库存",name:"medicinesTab"}},[a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"药品名称",prop:"medicinesName"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入药品名称",clearable:"",size:"small"},model:{value:e.queryParams.medicinesName,callback:function(t){e.$set(e.queryParams,"medicinesName",t)},expression:"queryParams.medicinesName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"关键字",prop:"keywords"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入关键字",clearable:"",size:"small"},model:{value:e.queryParams.keywords,callback:function(t){e.$set(e.queryParams,"keywords",t)},expression:"queryParams.keywords"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"药品类型",prop:"medicinesType"}},[a("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"药品类型",clearable:"",size:"small"},model:{value:e.queryParams.medicinesType,callback:function(t){e.$set(e.queryParams,"medicinesType",t)},expression:"queryParams.medicinesType"}},e._l(e.medicinesTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"生产厂家",prop:"producterId"}},[a("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"生产厂家",clearable:"",size:"small"},model:{value:e.queryParams.producterId,callback:function(t){e.$set(e.queryParams,"producterId",t)},expression:"queryParams.producterId"}},e._l(e.producterOptions,(function(e){return a("el-option",{key:e.producterId,attrs:{label:e.producterName,value:e.producterId}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"处方类型",prop:"prescriptionType"}},[a("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"处方类型",clearable:"",size:"small"},model:{value:e.queryParams.prescriptionType,callback:function(t){e.$set(e.queryParams,"prescriptionType",t)},expression:"queryParams.prescriptionType"}},e._l(e.prescriptionTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{size:"small","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholde":"开始日期","end-placeholde":"结束日期"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.medicinesTableList}},[a("el-table-column",{attrs:{label:"药品ID",align:"center",prop:"medicinesId"}}),e._v(" "),a("el-table-column",{attrs:{label:"药品名称",align:"center",prop:"medicinesName"}}),e._v(" "),a("el-table-column",{attrs:{label:"药品编号",align:"center",prop:"medicinesNumber"}}),e._v(" "),a("el-table-column",{attrs:{label:"生产厂家",width:"280px",align:"center",prop:"producterId",formatter:e.producterFormatter}}),e._v(" "),a("el-table-column",{attrs:{label:"药品类型",align:"center",prop:"medicinesType",formatter:e.medicinesTypeFormatter}}),e._v(" "),a("el-table-column",{attrs:{label:"处方类型",align:"center",prop:"prescriptionType",formatter:e.prescriptionTypeFormatter}}),e._v(" "),a("el-table-column",{attrs:{label:"关键字",align:"center",prop:"keywords"}}),e._v(" "),a("el-table-column",{attrs:{label:"库存量",align:"center",prop:"medicinesStockNum"}}),e._v(" "),a("el-table-column",{attrs:{label:"预警值",align:"center",prop:"medicinesStockDangerNum"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"status",align:"center",formatter:e.statusFormatter}})],1),e._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{"current-page":e.queryParams.pageNum,"page-sizes":[5,10,20,30],"page-size":e.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"批次库存及价格",name:"inventoryLogTab"}},[a("el-form",{ref:"queryLogForm",attrs:{model:e.queryLogParams,inline:!0,"label-width":"88px"}},[a("el-form-item",{attrs:{label:"采购单据号",prop:"purchaseId"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"采购单据号",clearable:"",size:"small"},model:{value:e.queryLogParams.purchaseId,callback:function(t){e.$set(e.queryLogParams,"purchaseId",t)},expression:"queryLogParams.purchaseId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"药品名称",prop:"medicinesName"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入药品名称",clearable:"",size:"small"},model:{value:e.queryLogParams.medicinesName,callback:function(t){e.$set(e.queryLogParams,"medicinesName",t)},expression:"queryLogParams.medicinesName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"药品类型",prop:"medicinesType"}},[a("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"药品类型",clearable:"",size:"small"},model:{value:e.queryLogParams.medicinesType,callback:function(t){e.$set(e.queryLogParams,"medicinesType",t)},expression:"queryLogParams.medicinesType"}},e._l(e.medicinesTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"生产厂家",prop:"producterId"}},[a("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"生产厂家",clearable:"",size:"small"},model:{value:e.queryLogParams.producterId,callback:function(t){e.$set(e.queryLogParams,"producterId",t)},expression:"queryLogParams.producterId"}},e._l(e.producterOptions,(function(e){return a("el-option",{key:e.producterId,attrs:{label:e.producterName,value:e.producterId}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"处方类型",prop:"prescriptionType"}},[a("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"处方类型",clearable:"",size:"small"},model:{value:e.queryLogParams.prescriptionType,callback:function(t){e.$set(e.queryLogParams,"prescriptionType",t)},expression:"queryLogParams.prescriptionType"}},e._l(e.prescriptionTypeOptions,(function(e){return a("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{size:"small","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholde":"开始日期","end-placeholde":"结束日期"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.inventoryLogTableList}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"入库号"}},[a("span",[e._v(e._s(t.row.inventoryLogId))])]),e._v(" "),a("el-form-item",{attrs:{label:"单据号"}},[a("span",[e._v(e._s(t.row.purchaseId))])]),e._v(" "),a("el-form-item",{attrs:{label:"规格"}},[a("span",[e._v(e._s(t.row.conversion)+e._s(t.row.unit))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"药品ID",align:"center",prop:"medicinesId"}}),e._v(" "),a("el-table-column",{attrs:{label:"药品名称",align:"center",prop:"medicinesName"}}),e._v(" "),a("el-table-column",{attrs:{label:"采购量",align:"center",prop:"inventoryLogNum"}}),e._v(" "),a("el-table-column",{attrs:{label:"批发价",align:"center",prop:"tradePrice"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("rounding")(t.row.tradePrice)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"批发额",align:"center",prop:"tradeTotalAmount"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("rounding")(t.row.tradeTotalAmount)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"批次号",align:"center",prop:"batchNumber"}}),e._v(" "),a("el-table-column",{attrs:{label:"生产厂家",width:"280px",align:"center",prop:"producterId",formatter:e.producterFormatter}}),e._v(" "),a("el-table-column",{attrs:{label:"药品类型",align:"center",prop:"medicinesType",formatter:e.medicinesTypeFormatter}}),e._v(" "),a("el-table-column",{attrs:{label:"处方类型",align:"center",prop:"prescriptionType",formatter:e.prescriptionTypeFormatter}}),e._v(" "),a("el-table-column",{attrs:{label:"入库时间",width:"180px",align:"center",prop:"createTime"}})],1),e._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{"current-page":e.queryParams.pageNum,"page-sizes":[5,10,20,30],"page-size":e.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},i=[],n=a("783c"),l=a("a2da"),s=a("b775");function o(e){return Object(s["a"])({url:"/erp/inventoryLog/listInventoryLogForPage",method:"get",params:e})}var c={filters:{rounding:function(e){return e.toFixed(2)}},data:function(){return{activeName:"medicinesTab",loading:!1,total:0,totalLog:0,medicinesTableList:[],inventoryLogTableList:[],statusOptions:[],medicinesTypeOptions:[],producterOptions:[],prescriptionTypeOptions:[],queryParams:{pageNum:1,pageSize:10,medicinesName:void 0,medicinesType:void 0,prescriptionType:void 0,producterId:void 0},queryLogParams:{pageNum:1,pageSize:10,purchaseId:void 0,medicinesName:void 0,medicinesType:void 0,prescriptionType:void 0,producterId:void 0},dateRange:[]}},created:function(){var e=this;this.getDataByType("sys_normal_disable").then((function(t){e.statusOptions=t.data})),this.getDataByType("his_medicines_type").then((function(t){e.medicinesTypeOptions=t.data})),this.getDataByType("his_prescription_type").then((function(t){e.prescriptionTypeOptions=t.data})),Object(n["e"])().then((function(t){e.producterOptions=t.data})),this.getMedicinesList()},methods:{handleClick:function(e,t){console.log(this.activeName),"medicinesTab"===this.activeName?this.getMedicinesList():"inventoryLogTab"===this.activeName&&this.getInventoryLogList()},getMedicinesList:function(){var e=this;this.loading=!0,Object(l["d"])(this.queryParams).then((function(t){e.medicinesTableList=t.data,e.total=t.total,e.loading=!1}))},getInventoryLogList:function(){var e=this;this.loading=!0,o(this.addDateRange(this.queryLogParams,this.dateRange)).then((function(t){e.inventoryLogTableList=t.data,e.totalLog=t.total,e.loading=!1}))},handleQuery:function(){"medicinesTab"===this.activeName?this.getMedicinesList():"inventoryLogTab"===this.activeName&&this.getInventoryLogList()},resetQuery:function(){"medicinesTab"===this.activeName?(this.resetForm("queryForm"),this.getMedicinesList()):"inventoryLogTab"===this.activeName&&(this.resetForm("queryLogForm"),this.dateRange=[],this.getInventoryLogList())},handleSizeChange:function(e){"medicinesTab"===this.activeName?(this.queryParams.pageSize=e,this.getMedicinesList()):"inventoryLogTab"===this.activeName&&(this.queryLogParams.pageSize=e,this.getInventoryLogList())},handleCurrentChange:function(e){"medicinesTab"===this.activeName?(this.queryParams.pageSize=e,this.getMedicinesList()):"inventoryLogTab"===this.activeName&&(this.queryLogParams.pageSize=e,this.getInventoryLogList())},statusFormatter:function(e){return this.selectDictLabel(this.statusOptions,e.status)},producterFormatter:function(e){var t="";return this.producterOptions.filter((function(a){parseInt(a.producterId)===parseInt(e.producterId)&&(t=a.producterName)})),t},medicinesTypeFormatter:function(e){return this.selectDictLabel(this.medicinesTypeOptions,e.medicinesType)},prescriptionTypeFormatter:function(e){return this.selectDictLabel(this.prescriptionTypeOptions,e.prescriptionType)}}},p=c,u=(a("9e46"),a("2877")),d=Object(u["a"])(p,r,i,!1,null,"aa5cf780",null);t["default"]=d.exports},"783c":function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"a",(function(){return n})),a.d(t,"f",(function(){return l})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return o})),a.d(t,"e",(function(){return c}));var r=a("b775");function i(e){return Object(r["a"])({url:"/erp/producter/listProducterForPage",method:"get",params:e})}function n(e){return Object(r["a"])({url:"/erp/producter/addProducter",method:"post",params:e})}function l(e){return Object(r["a"])({url:"/erp/producter/updateProducter",method:"put",params:e})}function s(e){return Object(r["a"])({url:"/erp/producter/deleteProducterByIds/"+e,method:"delete"})}function o(e){return Object(r["a"])({url:"/erp/producter/getProducterById/"+e,method:"get"})}function c(){return Object(r["a"])({url:"/erp/producter/selectAllProducter",method:"get"})}},"9e46":function(e,t,a){"use strict";var r=a("f85a"),i=a.n(r);i.a},a2da:function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"a",(function(){return n})),a.d(t,"e",(function(){return l})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return o})),a.d(t,"f",(function(){return c}));var r=a("b775");function i(e){return Object(r["a"])({url:"/erp/medicines/listMedicinesForPage",method:"get",params:e})}function n(e){return Object(r["a"])({url:"/erp/medicines/addMedicines",method:"post",params:e})}function l(e){return Object(r["a"])({url:"/erp/medicines/updateMedicines",method:"put",params:e})}function s(e){return Object(r["a"])({url:"/erp/medicines/deleteMedicinesByIds/"+e,method:"delete"})}function o(e){return Object(r["a"])({url:"/erp/medicines/getMedicinesById/"+e,method:"get"})}function c(e,t){return Object(r["a"])({url:"/erp/medicines/updateMedicinesStorage/"+e+"/"+t,method:"post"})}},f85a:function(e,t,a){}}]);