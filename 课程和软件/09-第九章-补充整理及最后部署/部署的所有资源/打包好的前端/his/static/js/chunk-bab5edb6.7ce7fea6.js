(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bab5edb6"],{d3b1:function(t,e,a){},e8aa:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"queryForm",attrs:{model:t.queryParams,inline:!0,"label-width":"98px"}},[a("el-form-item",{attrs:{label:"患者姓名",prop:"name"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入患者姓名",clearable:"",size:"small"},model:{value:t.queryParams.name,callback:function(e){t.$set(t.queryParams,"name",e)},expression:"queryParams.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入手机号",clearable:"",size:"small"},model:{value:t.queryParams.phone,callback:function(e){t.$set(t.queryParams,"phone",e)},expression:"queryParams.phone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"身份证号",prop:"idCard"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输身份证号",clearable:"",size:"small"},model:{value:t.queryParams.idCard,callback:function(e){t.$set(t.queryParams,"idCard",e)},expression:"queryParams.idCard"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:t.handleQuery}},[t._v("搜索")]),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",size:"mini"},on:{click:t.resetQuery}},[t._v("重置")])],1)],1),t._v(" "),a("el-row",{staticStyle:{"margin-bottom":"8px"},attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini",disabled:t.single},on:{click:t.handleViewFile}},[t._v("查看档案")])],1),t._v(" "),a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:t.single},on:{click:t.handleViewCareHistory}},[t._v("查看就诊病例")])],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{border:"",data:t.patientTableList},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"姓名",align:"center",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"电话",align:"center",prop:"phone"}}),t._v(" "),a("el-table-column",{attrs:{label:"身份证号",align:"center",prop:"idCard"}}),t._v(" "),a("el-table-column",{attrs:{label:"出生年月",align:"center",prop:"birthday"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.birthday.substring(0,10)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"年龄",align:"center",prop:"phone",formatter:t.calculateAgeFormatter}}),t._v(" "),a("el-table-column",{attrs:{label:"性别",prop:"sex",align:"center",formatter:t.sexFormatter}}),t._v(" "),a("el-table-column",{attrs:{label:"信息状态",prop:"isFinal",align:"center",formatter:t.isFinalFormatter}}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createTime"}})],1),t._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{"current-page":t.queryParams.pageNum,"page-sizes":[5,10,20,30],"page-size":t.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.fileOpen,width:"1000px",center:"","append-to-body":""},on:{"update:visible":function(e){t.fileOpen=e}}},[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left","label-width":"120px",inline:""}},[a("el-form-item",{attrs:{label:"ID:"}},[a("span",{domProps:{textContent:t._s(t.patientObj.patientId)}})]),t._v(" "),a("el-form-item",{attrs:{label:"姓名:"}},[a("span",{domProps:{textContent:t._s(t.patientObj.name)}})]),t._v(" "),a("el-form-item",{attrs:{label:"身份证号:"}},[a("span",{domProps:{textContent:t._s(t.patientObj.idCard)}})]),t._v(" "),a("el-form-item",{attrs:{label:"电话:"}},[a("span",{domProps:{textContent:t._s(t.patientObj.phone)}})]),t._v(" "),a("el-form-item",{attrs:{label:"患者性别:"}},[a("span",{domProps:{textContent:t._s(t.patientObj.sex)}})]),t._v(" "),a("el-form-item",{attrs:{label:"出生年月:"}},[a("span",{domProps:{textContent:t._s(t.patientObj.birthday)}})]),t._v(" "),a("el-form-item",{attrs:{label:"地址信息:"}},[a("span",{domProps:{textContent:t._s(t.patientObj.address)}})]),t._v(" "),a("el-form-item",{attrs:{label:"过敏信息:"}},[a("span",{domProps:{textContent:t._s(t.patientObj.allergyInfo)}})]),t._v(" "),a("el-form-item",{attrs:{label:"是否完善信息:"}},[a("span",{domProps:{textContent:t._s(t.patientObj.isFinal)}})]),t._v(" "),a("el-form-item",{attrs:{label:"最后登录ip:"}},[a("span",{domProps:{textContent:t._s(t.patientObj.lastLoginIp)}})]),t._v(" "),a("el-form-item",{attrs:{label:"最后登录时间:"}},[a("span",{domProps:{textContent:t._s(t.patientObj.lastLoginTime)}})]),t._v(" "),a("el-form-item",{attrs:{label:"创建时间:"}},[a("span",{domProps:{textContent:t._s(t.patientObj.createTime)}})]),t._v(" "),a("el-form-item",{attrs:{label:"更新时间:"}},[a("span",{domProps:{textContent:t._s(t.patientObj.updateTime)}})]),t._v(" "),a("el-form-item",{attrs:{label:"紧急联系人:"}},[a("span",{domProps:{textContent:t._s(t.patientFileObj.emergencyContactName)}})]),t._v(" "),a("el-form-item",{attrs:{label:"紧急联系人电话:"}},[a("span",{domProps:{textContent:t._s(t.patientFileObj.emergencyContactPhone)}})]),t._v(" "),a("el-form-item",{attrs:{label:"关系:"}},[a("span",{domProps:{textContent:t._s(t.patientFileObj.emergencyContactRelation)}})]),t._v(" "),a("el-form-item",{attrs:{label:"左耳听力:"}},[a("span",{domProps:{textContent:t._s(t.patientFileObj.leftEarHearing)}})]),t._v(" "),a("el-form-item",{attrs:{label:"右耳听力:"}},[a("span",{domProps:{textContent:t._s(t.patientFileObj.rightEarHearing)}})]),t._v(" "),a("el-form-item",{attrs:{label:"左眼视力:"}},[a("span",{domProps:{textContent:t._s(t.patientFileObj.leftVision)}})]),t._v(" "),a("el-form-item",{attrs:{label:"右眼视力:"}},[a("span",{domProps:{textContent:t._s(t.patientFileObj.rightVision)}})]),t._v(" "),a("el-form-item",{attrs:{label:"身高:"}},[a("span",{domProps:{textContent:t._s(t.patientFileObj.height)}})]),t._v(" "),a("el-form-item",{attrs:{label:"体重:"}},[a("span",{domProps:{textContent:t._s(t.patientFileObj.weight)}})]),t._v(" "),a("el-form-item",{attrs:{label:"血型:"}},[a("span",{domProps:{textContent:t._s(t.patientFileObj.bloodType)}})]),t._v(" "),a("el-form-item",{attrs:{label:"个人史:"}},[a("span",{domProps:{textContent:t._s(t.patientFileObj.personalInfo)}})]),t._v(" "),a("el-form-item",{attrs:{label:"家族史:"}},[a("span",{domProps:{textContent:t._s(t.patientFileObj.familyInfo)}})]),t._v(" "),a("el-form-item",{attrs:{label:"档案创建时间:"}},[a("span",{domProps:{textContent:t._s(t.patientFileObj.createTime)}})]),t._v(" "),a("el-form-item",{attrs:{label:"档案更新时间:"}},[a("span",{domProps:{textContent:t._s(t.patientFileObj.updateTime)}})])],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelFile}},[t._v("取 消")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.careHistoryOpen,width:"1000px",center:"","append-to-body":""},on:{"update:visible":function(e){t.careHistoryOpen=e}}},[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left","label-width":"120px",inline:""}},[a("el-card",[a("el-form-item",{attrs:{label:"ID:"}},[a("span",{domProps:{textContent:t._s(t.patientObj.patientId)}})]),t._v(" "),a("el-form-item",{attrs:{label:"姓名:"}},[a("span",{domProps:{textContent:t._s(t.patientObj.name)}})]),t._v(" "),a("el-form-item",{attrs:{label:"身份证号:"}},[a("span",{domProps:{textContent:t._s(t.patientObj.idCard)}})]),t._v(" "),a("el-form-item",{attrs:{label:"电话:"}},[a("span",{domProps:{textContent:t._s(t.patientObj.phone)}})])],1)],1),t._v(" "),a("el-card",{staticStyle:{"margin-top":"3px"}},[t.allPatientMsg.length>0?a("div",[a("el-collapse",{attrs:{accordion:""}},t._l(t.allPatientMsg,(function(e,n){return a("el-collapse-item",{key:n,attrs:{name:n}},[a("template",{slot:"title"},[t._v("\n              科室:【"+t._s(e.deptName)+"】就诊时间:【"+t._s(e.careDate)+"】\n            ")]),t._v(" "),a("div",[t._v("主诉:"+t._s(e.caseTitle))]),t._v(" "),a("div",[t._v("诊断信息:"+t._s(e.caseResult))]),t._v(" "),a("div",[t._v("医生建议:"+t._s(e.doctorTips))]),t._v(" "),a("div",[t._v("备注:"+t._s(e.remark))]),t._v(" "),a("el-collapse",{directives:[{name:"show",rawName:"v-show",value:e.careOrders.length>0,expression:"item.careOrders.length>0"}],attrs:{accordion:""}},t._l(e.careOrders,(function(e,n){return a("el-collapse-item",{key:n},[a("template",{slot:"title"},[t._v("\n                  【 "+t._s("0"===e.coType?"药品处方":"检查处方")+"】【"+t._s(n+1)+"】 "),a("span",[t._v("【处方总额】:￥"+t._s(e.allAmount))])]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{border:"",data:e.careOrderItems}},[a("el-table-column",{attrs:{label:"序号",align:"center",type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{label:"0"===e.coType?"药品名称":"项目名称",align:"center",prop:"itemName"}}),t._v(" "),a("el-table-column",{attrs:{label:"数量",align:"center",prop:"num"}}),t._v(" "),a("el-table-column",{attrs:{label:"单价(元)",align:"center",prop:"price"}}),t._v(" "),a("el-table-column",{attrs:{label:"金额(元)",align:"center",prop:"amount"}}),t._v(" "),a("el-table-column",{attrs:{label:"备注",prop:"remark",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"status",align:"center",formatter:t.statusFormatter}})],1)],2)})),1)],2)})),1)],1):a("div",{staticStyle:{"text-align":"center"}},[t._v("\n        暂无就诊数据\n      ")])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelHistory}},[t._v("取 消")])],1)],1)],1)},i=[],l=a("b775");function s(t){return Object(l["a"])({url:"/doctor/patient/listPatientForPage",params:t})}function r(t){return Object(l["a"])({url:"/doctor/patient/getPatientById/"+t,method:"get"})}function o(t){return Object(l["a"])({url:"/doctor/patient/getPatientFileById/"+t,method:"get"})}function p(t){return Object(l["a"])({url:"/doctor/patient/getPatientAllMessageByPatientId/"+t,method:"get"})}var m={data:function(){return{loading:!1,ids:[],single:!0,multiple:!0,total:0,patientTableList:[],title:"",fileOpen:!1,sexOptions:[],isFinalOptions:[],queryParams:{pageNum:1,pageSize:10,name:void 0,idCard:void 0,phone:void 0},patientObj:{},patientFileObj:{},careHistoryOpen:!1,allPatientMsg:[],statusOptions:[]}},created:function(){var t=this;this.getDataByType("sys_user_sex").then((function(e){t.sexOptions=e.data})),this.getDataByType("his_patient_msg_final").then((function(e){t.isFinalOptions=e.data})),this.getDataByType("his_order_details_status").then((function(e){t.statusOptions=e.data})),this.getPatientList()},methods:{getPatientList:function(){var t=this;this.loading=!0,s(this.addDateRange(this.queryParams,this.dateRange)).then((function(e){t.patientTableList=e.data,t.total=e.total,t.loading=!1}))},handleQuery:function(){this.getPatientList()},resetQuery:function(){this.resetForm("queryForm"),this.getPatientList()},handleSelectionChange:function(t){this.ids=t.map((function(t){return t.patientId})),this.single=1!==t.length,this.multiple=!t.length},handleSizeChange:function(t){this.queryParams.pageSize=t,this.getPatientList()},handleCurrentChange:function(t){this.queryParams.pageNum=t,this.getPatientList()},sexFormatter:function(t){return this.selectDictLabel(this.sexOptions,t.sex)},isFinalFormatter:function(t){return this.selectDictLabel(this.isFinalOptions,t.isFinal)},calculateAgeFormatter:function(t){return this.getAge(t.birthday.substring(0,10))},handleViewFile:function(){var t=this,e=this.ids[0];this.fileOpen=!0,this.title="查询患者档案信息",this.patientFileObj={},this.patientObj={},r(e).then((function(e){t.patientObj=e.data;var a=t.patientObj.sex,n=t.patientObj.isFinal;t.patientObj.sex="0"===a?"男":"1"===a?"女":"未知",t.patientObj.isFinal="0"===n?"未完善":"已完善"})),o(e).then((function(e){null!==e.data&&(t.patientFileObj=e.data)}))},cancelFile:function(){this.fileOpen=!1,this.title=""},handleViewCareHistory:function(t){var e=this,a=this.ids[0];this.careHistoryOpen=!0,this.title="查询患者病历信息",this.patientObj={},r(a).then((function(t){e.patientObj=t.data})),p(a).then((function(t){e.allPatientMsg=t.data})).catch((function(){e.msgError("查询失败")}))},statusFormatter:function(t){return this.selectDictLabel(this.statusOptions,t.status)},cancelHistory:function(){this.careHistoryOpen=!1,this.allPatientMsg=[]}}},c=m,d=(a("fe2b"),a("2877")),b=Object(d["a"])(c,n,i,!1,null,"02cef9ea",null);e["default"]=b.exports},fe2b:function(t,e,a){"use strict";var n=a("d3b1"),i=a.n(n);i.a}}]);